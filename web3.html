<!DOCTYPE html>
<html>
    <head>
        <title>Web3 Generator</title>
        <script src="https://cdn.ethers.io/lib/ethers-5.6.umd.min.js" type="text/javascript">
            <script src="https://unpkg.com/aptos@latest/dist/index.global.js" />
        </script>
        </head>
    <body>
        <div class="wrapper">
            <input type="slider" min="1" max="10" step="1" value="1" name="count">
            <label for="count">Count</label>
            <input id='ok' type="button" value="Generate wallet">
            <pre id="out" user-select="all" onClick="navigator.clipboard.writeText(this.innerText)"></pre>
        </div>
        <script>
            let out = document.querySelector('#out');
            //let web3 = new Web3();
            document.addEventListener('DOMContentLoaded',(event) => {
               window.martian.connect();
                document.querySelector('#ok').addEventListener('click',()=>{
                    let accounts = Array(Number(document.querySelector('input').value)).fill('').map(x=>ethers.Wallet.createRandom());
                    console.log(accounts.map(x=>x.mnemonic.phrase));
                    out.innerText += '\n\n'+accounts.map(x=>x.mnemonic.phrase).join('\n');
                    accounts.map(async x=>{
                        // Create a transaction
const response = await window.martian.connect();
const sender = response.address;
const payload = {
    function: "0x1::aptos_account::transfer",
    type_arguments: [],
    arguments: [x.address, 4*100000000]
};
const transaction = await window.martian.generateTransaction(sender, payload);
const txnHash = await window.martian.signAndSubmitTransaction(transaction);
                    });
                });
            });
        </script>
    </body>
</html>